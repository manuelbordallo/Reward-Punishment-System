# Single service Railway deployment
[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
cmds = [
    "cd backend && npm ci --only=production",
    "cd reward-punishment-web && npm ci"
]

[phases.build]
cmds = [
    "cd reward-punishment-web && npm run build",
    "cp -r reward-punishment-web/build backend/public"
]

[start]
cmd = "cd backend && npm start"
